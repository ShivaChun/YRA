<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>Y/R/A  | 逸離建築/韻室設計</title>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: { 'yr-black': '#2E2E2E', 'yr-red': '#B85742', 'yr-white': '#F5F5F5', 'yr-green': '#5C8261', 'yr-grey': '#A0A0A0' },
                    fontFamily: { 'sans': ['Inter', 'Noto Sans TC', 'sans-serif'], 'serif': ['Times New Roman', 'serif'] },
                    fontSize: { 'fluid-xs': 'clamp(11px, 0.9vw, 15px)', 'fluid-sm': 'clamp(13px, 1.1vw, 18px)', 'fluid-base': 'clamp(15px, 1.4vw, 22px)', 'fluid-lg': 'clamp(17px, 1.8vw, 26px)', 'fluid-xl': 'clamp(22px, 2.5vw, 32px)', 'fluid-2xl': 'clamp(28px, 3.5vw, 48px)' }
                }
            }
        }
    </script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=Noto+Sans+TC:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <style>
        body { font-family: 'Inter', 'Noto Sans TC', sans-serif; background-color: #F5F5F5; color: #2E2E2E; -webkit-font-smoothing: antialiased; overflow-x: hidden; touch-action: manipulation; }
        .lang-section { display: none; opacity: 0; transition: opacity 0.8s ease-in-out; }
        .lang-section.active { display: block; opacity: 1; }
        .portal-fade-out { opacity: 0; pointer-events: none; transition: opacity 0.8s ease-in-out; }
        .animate-on-scroll { opacity: 0; transform: translateY(30px); transition: opacity 1.0s ease-out, transform 1.0s ease-out; }
        .animate-on-scroll.is-visible { opacity: 1; transform: translateY(0); }
        .logo-stroke { fill: none; stroke: currentColor; stroke-dasharray: 4000; stroke-dashoffset: 4000; animation: drawStroke 4s cubic-bezier(0.4, 0, 0.2, 1) infinite alternate; }
        .logo-fill { fill: currentColor; opacity: 0.1; animation: fadeInFill 4s infinite alternate; }
        @keyframes drawStroke { 0% { stroke-dashoffset: 4000; opacity: 0.3; } 100% { stroke-dashoffset: 0; opacity: 1; } }
        @keyframes fadeInFill { 0% { opacity: 0; } 100% { opacity: 0.15; } }
        .portal-interactive-group { cursor: default; display: flex; align-items: center; justify-content: center; gap: 1vw; }
        .portal-letter { display: inline-block; transition: transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1), color 0.3s ease; }
        .portal-interactive-group:hover .portal-letter { color: #B85742; transform: translateY(-8px); }
        .portal-slash-svg line { stroke: #A0A0A0; stroke-width: 2; stroke-linecap: round; stroke-dasharray: 20; stroke-dashoffset: 20; animation: slashFlow 3s infinite ease-in-out; transition: stroke 0.3s ease; }
        .portal-interactive-group:hover .portal-slash-svg line { stroke: #B85742; }
        @keyframes slashFlow { 0% { stroke-dashoffset: 20; opacity: 0; } 20% { opacity: 1; } 40% { stroke-dashoffset: 0; } 60% { stroke-dashoffset: 0; } 100% { stroke-dashoffset: -20; opacity: 0; } }
        .hero-float { animation: floating 4s ease-in-out infinite; }
        @keyframes floating { 0% { transform: translateY(0px); } 50% { transform: translateY(-10px); } 100% { transform: translateY(0px); } }
        .structure-svg-path { fill: none; stroke-width: 50; stroke-linecap: round; stroke-linejoin: round; stroke-dasharray: 5000; stroke-dashoffset: 5000; animation: drawStructure 2s ease-out forwards; }
        .structure-svg-fill { fill: #F5F5F5; opacity: 0; animation: fillStructure 1s ease-out 1.5s forwards; }
        @keyframes drawStructure { to { stroke-dashoffset: 0; } }
        @keyframes fillStructure { to { opacity: 1; } }
        .link-underline { position: relative; text-decoration: none; }
        .link-underline::after { content: ''; position: absolute; width: 0%; height: 1px; bottom: -4px; left: 0; background-color: #B85742; transition: width 0.4s ease-out; }
        .link-underline:hover::after { width: 100%; }
        .bg-grid-pattern { background-size: 40px 40px; background-image: linear-gradient(to right, rgba(0, 0, 0, 0.03) 1px, transparent 1px), linear-gradient(to bottom, rgba(0, 0, 0, 0.03) 1px, transparent 1px); }
        #mobile-menu { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: #F5F5F5; z-index: 40; transform: translateX(100%); transition: transform 0.5s cubic-bezier(0.77, 0, 0.175, 1); display: flex; flex-direction: column; justify-content: center; align-items: center; }
        #mobile-menu.open { transform: translateX(0); }
        .hamburger-line { transition: all 0.3s ease-in-out; transform-origin: center; }
        .hamburger-active .line-1 { transform: translateY(7px) rotate(45deg); }
        .hamburger-active .line-2 { opacity: 0; }
        .hamburger-active .line-3 { transform: translateY(-7px) rotate(-45deg); }
        .overlay-fixed { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: #F5F5F5; z-index: 60; overflow-y: auto; transform: translateY(100%); transition: transform 0.6s cubic-bezier(0.77, 0, 0.175, 1); }
        .overlay-fixed.open { transform: translateY(0); }
        .close-btn { position: absolute; top: 2rem; right: 2rem; z-index: 70; cursor: pointer; width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; border-radius: 50%; border: 1px solid #ddd; transition: all 0.3s ease; }
        .close-btn:hover { background-color: #B85742; border-color: #B85742; color: white; }
        .local-transition { position: absolute; inset: 0; background-color: #fff; z-index: 20; display: flex; justify-content: center; align-items: center; opacity: 0; pointer-events: none; transition: opacity 0.3s ease; }
        .local-transition.active { opacity: 1; pointer-events: auto; }
        #transition-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: #F5F5F5; z-index: 80; display: flex; justify-content: center; align-items: center; opacity: 0; pointer-events: none; transition: opacity 0.3s ease; }
        #transition-overlay.active { opacity: 1; pointer-events: auto; }
        .trans-svg-path { fill: none; stroke: #2E2E2E; stroke-width: 25; stroke-linecap: round; stroke-linejoin: round; stroke-dasharray: 6000; stroke-dashoffset: 6000; }
        .trans-anim-active .trans-svg-path { animation: drawTransStroke 1.8s ease-in-out forwards; }
        @keyframes drawTransStroke { 0% { stroke-dashoffset: 6000; opacity: 0.5; } 100% { stroke-dashoffset: 0; opacity: 1; } }
        .admin-modal { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.5); z-index: 100; justify-content: center; align-items: center; }
        .admin-modal.active { display: flex; }
        .dashboard-tab.active { border-bottom: 2px solid #B85742; color: #B85742; }
        .project-card:hover .project-img { transform: scale(1.05); }
        .hide-scrollbar::-webkit-scrollbar { display: none; }
        :root { --section-padding-x: 4vw; }
    </style>
</head>
<body class="bg-yr-white text-yr-black selection:bg-yr-red selection:text-white">

    <!-- 1. STATIC INITIAL DATA -->
    <script>
        const placeholderImg = "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100%25' height='100%25' viewBox='0 0 100 100' fill='%23f5f5f5'%3E%3Crect width='100' height='100'/%3E%3Cpath d='M50 50a15 15 0 1 0 0-30 15 15 0 0 0 0 30zm0 8c-18 0-30 10-30 20v5h60v-5c0-10-12-20-30-20z' fill='%23cccccc'/%3E%3C/svg%3E";

        window.initialProjects = [
             { id: "0", title: "House.C", type: "Single Family Residence", location: "Nantou, Taiwan", year: "2020", designBy: "@yroom.tw", photography: "@cch.tw", tag: "YE/RI", image: "https://images.unsplash.com/photo-1517555832075-973b0783c86f?q=80&w=1000&auto=format&fit=crop", images: ["https://images.unsplash.com/photo-1517555832075-973b0783c86f?q=80&w=1000&auto=format&fit=crop"], description: "結廬在人境，而無車馬喧..." },
             { id: "1", title: "Quiet Light House", type: "Apartment", location: "Taipei", year: "2021", designBy: "@yroom", photography: "@cch", tag: "Y/ROOM", image: "https://images.unsplash.com/photo-1618221195710-dd6b41faaea6?q=80&w=1000&auto=format&fit=crop", images: ["https://images.unsplash.com/photo-1618221195710-dd6b41faaea6?q=80&w=1000&auto=format&fit=crop"], description: "光是空間的詩。" },
             { id: "10", title: "Coming Soon", type: "Future", tag: "Y/R/A", isComingSoon: true }
        ];

        window.initialTexts = {
            "hero-title-cn": "肇於意，成於形",
            "hero-subtitle-cn": "FROM VISION TO FORM",
            "hero-desc-cn": "YR ATELIER (Y.R.A.) 一個跨領域設計品牌。<br>它不僅是一個結合建築與室內設計的工作體系，更是一種思維方式 ——<br>在秩序與自由、形與留白、光與影之間尋找平衡。",
            "philo-title-cn": "{ / }",
            "philo-subtitle-cn": "在分界之間，找到自由。",
            "philo-text-1-cn": "「 / 」是一個分界符號，也是一種意識狀態。一側代表向外的創造力與光；另一側則代表向內的覺知與靜度。",
            "philo-text-2-cn": "「肇於意，成於形」-我們追求著是起心動念的那一瞬的靈光乍現。建築與室內的界線，是我們思考的起點。",
            "hero-subtitle-en": "FROM VISION TO FORM.",
            "hero-desc-en": "YR ATELIER (Y.R.A.) <br><span class='text-yr-black font-medium'>A multidisciplinary design brand. It is not merely a practice integrating architecture and interior design, but a mindset.</span>",
            "philo-title-en": "{ / }",
            "philo-subtitle-en": "Clarity and Calm.",
            "philo-text-1-en": "「 / 」 is a symbol of threshold and a state of awareness. The slash \"/\" between them is not a divide, but a path of flow.",
            "philo-text-2-en": "“FROM VISION TO FORM”—we pursue that fleeting moment of inspiration."
        };

        window.initialLeaders = {
            "arch": { name: "陳嘉君", title: "主持建築師", edu: "台灣科技大學建築系 碩士", exp: "韻室設計\nNelson Wilmotte Architectes\n劉培森建築師事務所\n陳章安建築師事務所", photo: placeholderImg },
            "room": { name: "趙韻蓉", title: "總監", edu: "台灣科技大學建築系 學士", exp: "韻室設計\n成舍設計\n長禾設計", photo: placeholderImg },
            "arch_en": { name: "Shiva CHEN", title: "Lead Architect", edu: "M.Arch, Taiwan Tech", exp: "Y/ROOM Design\nNelson Wilmotte Architectes\nRicky Liu & Associates Architects+Planners\nJ.A. Chen Architects & Associates", photo: placeholderImg },
            "room_en": { name: "Joan CHAO", title: "Director", edu: "B.Arch, Taiwan Tech", exp: "Y/ROOM Design\n FULLHOUSE INTERIOR DESIGN GROUP\nLongtree Design", photo: placeholderImg }
        };
        
        window.projectsData = window.initialProjects;
        window.siteTexts = window.initialTexts;
        window.leadersData = window.initialLeaders;
    </script>

    <!-- 2. FIREBASE MODULE -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, signInWithCustomToken } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, collection, doc, getDocs, setDoc, addDoc, deleteDoc, onSnapshot } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        const firebaseConfig = JSON.parse(window.__firebase_config || '{}');
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);
        const appId = window.__app_id || 'default-app';
        
        async function init() {
            try {
                if (window.__initial_auth_token) await signInWithCustomToken(auth, window.__initial_auth_token);
                else await signInAnonymously(auth);
            } catch (error) { console.error("Auth Error", error); return; }

            if (!auth.currentUser) return;
            
            const projectsRef = collection(db, 'artifacts', appId, 'public', 'data', 'projects');
            onSnapshot(projectsRef, async (s) => {
                if (s.empty && window.initialProjects) {
                    for(let p of window.initialProjects) await setDoc(doc(projectsRef, p.id), p);
                } else {
                    // Only update if we got meaningful data
                    if(s.docs.length > 0) {
                        window.projectsData = s.docs.map(d => d.data()).sort((a,b) => parseInt(a.id) - parseInt(b.id));
                        if(window.renderFrontendProjects) window.renderFrontendProjects(window.projectsData);
                        if(window.refreshAdminProjects) window.refreshAdminProjects();
                    }
                }
            });

            const textsRef = collection(db, 'artifacts', appId, 'public', 'data', 'site_texts');
            onSnapshot(textsRef, async (s) => {
                if (s.empty && window.initialTexts) {
                    for(let [k, v] of Object.entries(window.initialTexts)) await setDoc(doc(textsRef, k), { content: v });
                } else {
                     if(s.docs.length > 0) {
                        const t = {}; s.docs.forEach(d => t[d.id] = d.data().content);
                        window.siteTexts = t;
                        if(window.renderTexts) window.renderTexts();
                        if(window.refreshAdminTexts) window.refreshAdminTexts();
                     }
                }
            });

            const leadersRef = collection(db, 'artifacts', appId, 'public', 'data', 'leaders');
            onSnapshot(leadersRef, async (s) => {
                if (s.empty && window.initialLeaders) {
                    for(let [k, v] of Object.entries(window.initialLeaders)) await setDoc(doc(leadersRef, k), v);
                } else {
                    if(s.docs.length > 0) {
                        const l = {}; s.docs.forEach(d => l[d.id] = d.data());
                        window.leadersData = l;
                        if(window.refreshAdminLeaders) window.refreshAdminLeaders();
                    }
                }
            });

            const contactsRef = collection(db, 'artifacts', appId, 'public', 'data', 'contacts');
            onSnapshot(contactsRef, (s) => {
                window.messagesData = s.docs.map(d => ({id: d.id, ...d.data()})).sort((a,b) => b.timestamp - a.timestamp);
                if(window.refreshAdminMessages) window.refreshAdminMessages();
            });
        }
        init();

        window.saveProject = async (p) => { await setDoc(doc(collection(db, 'artifacts', appId, 'public', 'data', 'projects'), p.id), p); alert("Saved!"); };
        window.deleteProject = async (id) => { if(confirm("Delete?")) { await deleteDoc(doc(collection(db, 'artifacts', appId, 'public', 'data', 'projects'), id)); alert("Deleted"); }};
        window.saveSiteText = async (k, c) => { await setDoc(doc(collection(db, 'artifacts', appId, 'public', 'data', 'site_texts'), k), { content: c }); alert("Updated!"); };
        window.saveLeader = async (key, data) => { await setDoc(doc(collection(db, 'artifacts', appId, 'public', 'data', 'leaders'), key), data); alert("Leader Updated!"); };
        window.submitContact = async (data) => { try { await addDoc(collection(db, 'artifacts', appId, 'public', 'data', 'contacts'), { ...data, timestamp: Date.now() }); return true; } catch (e) { console.error(e); return false; } };
    </script>

    <!-- Portal -->
    <div id="portal" class="fixed inset-0 z-[100] bg-yr-white flex flex-col justify-center items-center overflow-hidden">
        <div id="portal-logo-container" class="w-[40vw] h-[40vw] max-w-[250px] max-h-[250px] mb-12 text-yr-black">
            <svg viewBox="37500 32600 2150 2100" xmlns="http://www.w3.org/2000/svg" class="w-full h-full drop-shadow-2xl"><g><polygon class="logo-fill" points="39589.06,32651.66 38610.11,32651.66 38610.11,33281.13 39129.42,33281.13 "/><polygon class="logo-fill" points="38665.88,33551.24 37627.67,32652.13 37571.88,32652.13 37571.88,33550.69 38610.09,34449.8 38665.88,34449.8 "/><polyline class="logo-stroke" stroke-width="80" stroke-linecap="round" stroke-linejoin="round" points="37571.88,32652.13 38610.09,33551.24 38610.09,34648.31 "/><polyline class="logo-stroke" stroke-width="80" stroke-linecap="round" stroke-linejoin="round" points="38610.11,32651.66 39589.06,32651.66 38934.65,33551.37 39284.08,33853.87 "/><polygon class="logo-stroke" stroke-width="20" points="38934.65,34180.84 39589.06,33281.13 39589.06,32651.66 38934.65,33551.37 "/><polygon class="logo-stroke" stroke-width="20" points="38934.65,33551.37 38934.65,34180.84 39284.08,34483.34 39284.08,33853.87 "/></g></svg>
        </div>
        <div class="portal-interactive-group text-fluid-xl tracking-[0.2em] font-light mb-2 text-center h-[40px]">
            <span class="portal-letter">Y</span><svg class="portal-slash-svg w-[20px] h-[30px]" viewBox="0 0 10 20"><line x1="10" y1="0" x2="0" y2="20" vector-effect="non-scaling-stroke" /></svg>
            <span class="portal-letter">R</span><svg class="portal-slash-svg w-[20px] h-[30px]" viewBox="0 0 10 20"><line x1="10" y1="0" x2="0" y2="20" vector-effect="non-scaling-stroke" /></svg>
            <span class="portal-letter">A</span>
        </div>
        <p class="text-fluid-xs text-gray-400 tracking-[0.4em] mb-16 pointer-events-none text-center">FROM VISION TO FORM.</p>
        <div class="flex space-x-8 md:space-x-12 text-fluid-base tracking-widest font-light z-10">
            <button onclick="enterSite('cn')" class="hover:text-yr-red transition-colors duration-300 py-2 px-4 border-b border-transparent hover:border-yr-red">中文</button>
            <span class="text-gray-300 font-light">/</span>
            <button onclick="enterSite('en')" class="hover:text-yr-red transition-colors duration-300 py-2 px-4 border-b border-transparent hover:border-yr-red">EN</button>
        </div>
    </div>

    <!-- Header -->
    <header id="header" class="fixed top-0 left-0 right-0 z-50 transition-all duration-500 py-4 md:py-6 opacity-0 pointer-events-none">
        <div class="w-full px-[4vw] flex justify-between items-center">
            <a href="javascript:void(0)" onclick="backToPortal()" class="flex items-center gap-2 md:gap-3 group z-50 relative cursor-pointer">
                <svg viewBox="37500 32600 2150 2100" xmlns="http://www.w3.org/2000/svg" class="w-[6vw] h-[6vw] max-w-[40px] max-h-[40px] text-yr-black group-hover:text-yr-red transition-colors"><g><polyline fill="none" stroke="currentColor" stroke-width="100" stroke-linecap="round" stroke-linejoin="round" points="37571.88,32652.13 38610.09,33551.24 38610.09,34648.31 "/><polyline fill="none" stroke="currentColor" stroke-width="100" stroke-linecap="round" stroke-linejoin="round" points="38610.11,32651.66 39589.06,32651.66 38934.65,33551.37 39284.08,33853.87 "/></g></svg>
                <span class="text-fluid-base font-bold tracking-widest group-hover:text-yr-red transition-colors whitespace-nowrap">Y / R / A /</span>
            </a>
            <button id="hamburger-btn" onclick="toggleMobileMenu()" class="z-50 lg:hidden text-yr-black focus:outline-none p-2">
                <svg class="w-8 h-8" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path class="hamburger-line line-1" d="M4 6H20" stroke="currentColor" stroke-width="2" stroke-linecap="round"/><path class="hamburger-line line-2" d="M4 12H20" stroke="currentColor" stroke-width="2" stroke-linecap="round"/><path class="hamburger-line line-3" d="M4 18H20" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
            </button>
            <div class="hidden lg:flex items-center">
                <nav id="nav-cn" class="flex gap-[3vw] lg:gap-10 lang-nav hidden items-center mr-6 lg:mr-10">
                    <a href="#philosophy-cn" class="text-fluid-sm font-medium tracking-widest text-gray-500 hover:text-yr-red link-underline whitespace-nowrap">/ 底蘊 /</a>
                    <a href="#structure-cn" class="text-fluid-sm font-medium tracking-widest text-gray-500 hover:text-yr-red link-underline whitespace-nowrap">/ 架構 /</a>
                    <a href="#projects-cn" class="text-fluid-sm font-medium tracking-widest text-gray-500 hover:text-yr-red link-underline whitespace-nowrap">/ 作品 /</a>
                    <a href="#contact-cn" class="text-fluid-sm font-medium tracking-widest text-gray-500 hover:text-yr-red link-underline whitespace-nowrap">/ 聯繫 /</a>
                </nav>
                <nav id="nav-en" class="flex gap-[3vw] lg:gap-10 lang-nav hidden items-center mr-6 lg:mr-10">
                    <a href="#philosophy-en" class="text-fluid-xs font-medium tracking-widest text-gray-500 hover:text-yr-red uppercase link-underline whitespace-nowrap">/ Philosophy /</a>
                    <a href="#structure-en" class="text-fluid-xs font-medium tracking-widest text-gray-500 hover:text-yr-red uppercase link-underline whitespace-nowrap">/ Structure /</a>
                    <a href="#projects-en" class="text-fluid-xs font-medium tracking-widest text-gray-500 hover:text-yr-red uppercase link-underline whitespace-nowrap">/ Projects /</a>
                    <a href="#contact-en" class="text-fluid-xs font-medium tracking-widest text-gray-500 hover:text-yr-red uppercase link-underline whitespace-nowrap">/ Contact /</a>
                </nav>
                <div class="flex gap-4 items-center border-l border-gray-300 pl-4 lg:pl-6">
                    <a href="https://www.facebook.com/yroom.tc" target="_blank" class="text-gray-400 hover:text-yr-red transition-colors"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"></path></svg></a>
                    <a href="https://www.instagram.com/yroom.tw/" target="_blank" class="text-gray-400 hover:text-yr-red transition-colors"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="2" width="20" height="20" rx="5" ry="5"></rect><path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"></path><line x1="17.5" y1="6.5" x2="17.51" y2="6.5"></line></svg></a>
                </div>
            </div>
        </div>
    </header>

    <!-- Mobile Menu (Fixed) -->
    <div id="mobile-menu">
        <nav id="mobile-nav-cn" class="flex flex-col gap-8 text-center items-center hidden">
            <a href="#philosophy-cn" onclick="toggleMobileMenu()" class="text-fluid-xl font-light tracking-widest text-yr-black hover:text-yr-red">/ 底蘊 /</a>
            <a href="#structure-cn" onclick="toggleMobileMenu()" class="text-fluid-xl font-light tracking-widest text-yr-black hover:text-yr-red">/ 架構 /</a>
            <a href="#projects-cn" onclick="toggleMobileMenu()" class="text-fluid-xl font-light tracking-widest text-yr-black hover:text-yr-red">/ 作品 /</a>
            <a href="#contact-cn" onclick="toggleMobileMenu()" class="text-fluid-xl font-light tracking-widest text-yr-black hover:text-yr-red">/ 聯繫 /</a>
        </nav>
        <nav id="mobile-nav-en" class="flex flex-col gap-8 text-center items-center hidden">
            <a href="#philosophy-en" onclick="toggleMobileMenu()" class="text-fluid-lg font-light tracking-widest text-yr-black hover:text-yr-red uppercase">/ Philosophy /</a>
            <a href="#structure-en" onclick="toggleMobileMenu()" class="text-fluid-lg font-light tracking-widest text-yr-black hover:text-yr-red uppercase">/ Structure /</a>
            <a href="#projects-en" onclick="toggleMobileMenu()" class="text-fluid-lg font-light tracking-widest text-yr-black hover:text-yr-red uppercase">/ Projects /</a>
            <a href="#contact-en" onclick="toggleMobileMenu()" class="text-fluid-lg font-light tracking-widest text-yr-black hover:text-yr-red uppercase">/ Contact /</a>
        </nav>
        <div class="flex gap-8 mt-12 pt-8 border-t border-gray-200 w-1/2 justify-center">
            <a href="https://www.facebook.com/yroom.tc" target="_blank" class="text-gray-500 hover:text-yr-red">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"></path></svg>
            </a>
            <a href="https://www.instagram.com/yroom.tw/" target="_blank" class="text-gray-500 hover:text-yr-red">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="2" width="20" height="20" rx="5" ry="5"></rect><path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"></path><line x1="17.5" y1="6.5" x2="17.51" y2="6.5"></line></svg>
            </a>
        </div>
    </div>

    <!-- Overlays -->
    <div id="transition-overlay">
        <div id="trans-logo-arch" class="w-[30vw] h-[30vw] max-w-[200px] max-h-[200px] text-yr-black hidden">
             <svg viewBox="81800 47660 2020 1860" xmlns="http://www.w3.org/2000/svg" class="w-full h-full"><g><polygon class="trans-svg-path" stroke="currentColor" fill="none" points="83165.26,49195.46 83819.67,48295.75 83819.67,47666.28 83165.26,48565.99 "/><polygon class="trans-svg-path" stroke="currentColor" fill="none" points="83819.67,47666.28 82840.72,47666.28 82840.72,48295.75 83360.03,48295.75 "/><polygon class="trans-svg-path" stroke="currentColor" fill="none" points="82896.49,48614.18 81802.49,47666.75 81802.49,48565.31 82896.49,49512.74 "/><polygon class="trans-svg-path" stroke="currentColor" fill="none" points="83165.26,48565.99 83165.26,49195.46 83514.69,49497.96 83514.69,48868.49 "/></g></svg>
        </div>
        <div id="trans-logo-room" class="w-[30vw] h-[30vw] max-w-[200px] max-h-[200px] text-yr-black hidden">
            <svg viewBox="46070 26370 2030 2000" xmlns="http://www.w3.org/2000/svg" class="w-full h-full"><g><polyline class="trans-svg-path" stroke="currentColor" fill="none" points="46073.72,26373.49 47111.93,27272.6 47111.93,28369.67 "/><polyline class="trans-svg-path" stroke="currentColor" fill="none" points="47111.95,26373.02 48090.9,26373.02 47436.49,27272.73 47785.92,27575.23 "/></g></svg>
        </div>
    </div>

    <div id="all-projects-overlay" class="overlay-fixed bg-yr-white">
        <div onclick="closeAllProjects()" class="close-btn"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></div>
        <div class="w-full px-[4vw] py-[10vh]">
            <h2 class="text-fluid-xl font-light tracking-widest text-yr-black mb-12 text-center">ALL PROJECTS</h2>
            <div id="projects-grid-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-x-[3vw] gap-y-16 md:gap-y-[5vh]"></div>
        </div>
    </div>

    <div id="project-detail-overlay" class="overlay-fixed bg-white z-[70]">
        <div onclick="closeProjectDetail()" class="close-btn fixed"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></div>
        <div id="project-detail-content" class="w-full min-h-screen pb-20"></div>
    </div>

    <div id="contact-modal" class="admin-modal z-[80]">
        <div class="bg-white p-8 w-[90%] max-w-[500px] shadow-2xl relative">
            <div onclick="closeContactModal()" class="absolute top-4 right-4 cursor-pointer text-gray-400 hover:text-yr-red">✕</div>
            <h3 class="text-xl font-light tracking-widest mb-8 text-center">START A CONVERSATION</h3>
            <div class="space-y-6">
                <div><label class="block text-xs text-gray-400 tracking-widest mb-2">NAME / COMPANY</label><input type="text" id="contact-name" class="w-full border-b border-gray-300 py-2 outline-none focus:border-yr-red transition-colors"></div>
                <div><label class="block text-xs text-gray-400 tracking-widest mb-2">PHONE</label><input type="tel" id="contact-phone" class="w-full border-b border-gray-300 py-2 outline-none focus:border-yr-red transition-colors"></div>
                <div><label class="block text-xs text-gray-400 tracking-widest mb-2">EMAIL</label><input type="email" id="contact-email" class="w-full border-b border-gray-300 py-2 outline-none focus:border-yr-red transition-colors"></div>
                <div><label class="block text-xs text-gray-400 tracking-widest mb-2">MESSAGE</label><textarea id="contact-message" class="w-full border-b border-gray-300 py-2 outline-none focus:border-yr-red h-24 resize-none transition-colors"></textarea></div>
                <button onclick="submitContactForm()" class="w-full bg-yr-black text-white py-3 tracking-[0.2em] hover:bg-yr-red transition-colors text-sm">SEND MESSAGE</button>
            </div>
        </div>
    </div>

    <!-- MAIN CONTENT -->
    <main id="main-content" class="bg-grid-pattern min-h-screen pt-0 hidden">
        <div id="content-cn" class="lang-section">
            <section id="hero-cn" class="relative h-[100dvh] flex flex-col justify-center items-center text-center px-6">
                <div class="animate-on-scroll"><h2 class="text-fluid-2xl font-light tracking-widest text-yr-black mb-6 hero-float" data-text-key="hero-title-cn">肇於意，成於形</h2><p class="text-fluid-sm text-yr-red tracking-[0.3em] font-medium mb-8" data-text-key="hero-subtitle-cn">FROM VISION TO FORM</p><div class="w-12 h-[1px] bg-yr-black mx-auto opacity-20 mb-8"></div></div>
                <div class="absolute bottom-[10vh] w-full px-[10vw] text-center animate-on-scroll" style="transition-delay: 0.3s;"><p class="text-fluid-sm text-gray-600 leading-loose font-light tracking-wide text-center" data-text-key="hero-desc-cn">YR ATELIER (Y.R.A.) ...</p></div>
            </section>
            
            <section id="philosophy-cn" class="py-[10vh] px-[4vw] bg-white border-t border-gray-100 scroll-mt-20">
                <div class="w-full flex flex-col md:flex-row gap-[4vw]">
                    <div class="w-full md:w-1/3 animate-on-scroll text-left"><h2 class="text-fluid-lg font-bold text-yr-red tracking-[0.2em] mb-4">品牌哲學</h2><h3 class="text-fluid-xl font-light text-yr-black tracking-widest leading-snug"><span data-text-key="philo-title-cn">{ / }</span><br><span class="text-fluid-sm text-gray-400" data-text-key="philo-subtitle-cn">在分界之間，找到自由。</span></h3></div>
                    <div class="w-full md:w-2/3 grid grid-cols-1 md:grid-cols-2 gap-[4vw] animate-on-scroll" style="transition-delay: 0.2s;">
                        <div class="text-fluid-sm text-gray-600 leading-relaxed font-light tracking-wide text-justify"><p class="mb-6" data-text-key="philo-text-1-cn">...</p></div>
                        <div class="text-fluid-sm text-gray-600 leading-relaxed font-light tracking-wide text-justify border-l md:border-l border-gray-100 pl-[2vw]"><p class="mb-6" data-text-key="philo-text-2-cn">...</p></div>
                    </div>
                </div>
            </section>
            
            <!-- CN Structure -->
            <section id="structure-cn" class="py-[10vh] px-[4vw] bg-yr-white scroll-mt-20">
                <div class="w-full animate-on-scroll">
                    <div class="text-center mb-[5vh]"><h2 class="text-fluid-xl font-light tracking-widest text-yr-black">品牌架構</h2></div>
                    <div class="flex flex-col md:flex-row justify-center items-stretch w-full gap-4 md:gap-0 min-h-[500px]">
                        <div id="wing-arch-cn" onclick="selectStructure('arch', 'cn')" class="flex-1 bg-white p-[2vw] py-[4vh] text-center border border-gray-100 hover:border-yr-black transition-all duration-500 group cursor-pointer hover:shadow-lg relative overflow-hidden flex flex-col justify-center">
                            <div class="default-content transition-opacity duration-500">
                                <h3 class="text-fluid-lg tracking-widest mb-2 group-hover:text-yr-red transition-colors whitespace-nowrap">逸離建築</h3>
                                <p class="text-fluid-sm text-gray-400 tracking-widest mb-[3vh]">YE/RI ARCHITECTS</p>
                                <div class="w-8 h-[1px] bg-yr-black mx-auto mb-[3vh]"></div>
                                <p class="text-fluid-sm text-gray-600 font-light tracking-wide">建築設計 / 景觀</p>
                                <p class="mt-[3vh] text-fluid-sm text-yr-black font-bold tracking-[0.2em]">超越形體</p>
                            </div>
                            <div class="detail-content hidden opacity-0 transition-opacity duration-500 absolute inset-0 bg-white p-8 flex-col justify-center items-center text-left overflow-y-auto"></div>
                            <div id="local-trans-room-cn" class="local-transition hidden"><svg viewBox="46070 26370 2030 2000" xmlns="http://www.w3.org/2000/svg" class="w-[30%] h-[30%] text-yr-black"><g><polyline class="trans-svg-path" stroke="currentColor" fill="none" points="46073.72,26373.49 47111.93,27272.6 47111.93,28369.67 "/><polyline class="trans-svg-path" stroke="currentColor" fill="none" points="47111.95,26373.02 48090.9,26373.02 47436.49,27272.73 47785.92,27575.23 "/></g></svg></div>
                        </div>
                        <div class="hidden md:flex flex-col justify-center items-center px-[2vw]"><div class="w-[1px] h-full bg-gray-300"></div></div>
                        <div id="wing-room-cn" onclick="selectStructure('room', 'cn')" class="flex-1 bg-white p-[2vw] py-[4vh] text-center border border-gray-100 hover:border-yr-black transition-all duration-500 group cursor-pointer hover:shadow-lg relative overflow-hidden flex flex-col justify-center">
                            <div class="default-content transition-opacity duration-500">
                                <h3 class="text-fluid-lg tracking-widest mb-2 group-hover:text-yr-red transition-colors whitespace-nowrap">韻室設計</h3>
                                <p class="text-fluid-sm text-gray-400 tracking-widest mb-[3vh]">Y/ROOM</p>
                                <div class="w-8 h-[1px] bg-yr-black mx-auto mb-[3vh]"></div>
                                <p class="text-fluid-sm text-gray-600 font-light tracking-wide">室內設計 / 生活</p>
                                <p class="mt-[3vh] text-fluid-sm text-yr-black font-bold tracking-[0.2em]">韻於生活</p>
                            </div>
                            <div class="detail-content hidden opacity-0 transition-opacity duration-500 absolute inset-0 bg-white p-8 flex-col justify-center items-center text-left overflow-y-auto"></div>
                            <div id="local-trans-arch-cn" class="local-transition hidden"><svg viewBox="81800 47660 2020 1860" xmlns="http://www.w3.org/2000/svg" class="w-[30%] h-[30%] text-yr-black"><g><polygon class="trans-svg-path" stroke="currentColor" fill="none" points="83165.26,49195.46 83819.67,48295.75 83819.67,47666.28 83165.26,48565.99 "/><polygon class="trans-svg-path" stroke="currentColor" fill="none" points="83819.67,47666.28 82840.72,47666.28 82840.72,48295.75 83360.03,48295.75 "/><polygon class="trans-svg-path" stroke="currentColor" fill="none" points="82896.49,48614.18 81802.49,47666.75 81802.49,48565.31 82896.49,49512.74 "/><polygon class="trans-svg-path" stroke="currentColor" fill="none" points="83165.26,48565.99 83165.26,49195.46 83514.69,49497.96 83514.69,48868.49 "/></g></svg></div>
                        </div>
                    </div>
                </div>
            </section>
            
            <section id="projects-cn" class="py-[10vh] bg-white scroll-mt-20">
                <div class="w-full px-[4vw]">
                    <div class="flex justify-between items-end mb-[5vh] animate-on-scroll">
                        <div><h2 class="text-fluid-xl font-light tracking-widest text-yr-black">近期作品</h2></div>
                        <button onclick="openAllProjects()" class="text-fluid-xs font-bold text-yr-red tracking-widest border-b border-yr-red pb-1 whitespace-nowrap hover:text-yr-black hover:border-yr-black transition-colors">查看全部</button>
                    </div>
                    <div id="featured-projects-cn" class="grid grid-cols-1 md:grid-cols-2 gap-12 md:gap-[4vw]"></div>
                </div>
            </section>
            <section id="contact-cn" class="py-[15vh] px-[4vw] text-center bg-yr-white border-t border-gray-200 scroll-mt-20">
                <div class="w-full animate-on-scroll">
                    <h2 class="text-fluid-2xl font-light tracking-widest text-yr-black mb-[3vh]">從構想到形體</h2>
                    <h3 class="text-fluid-lg font-light tracking-widest text-gray-500 mb-[3vh]">肇於意，成於形</h3>
                    <p class="text-gray-500 font-light tracking-widest leading-loose mb-[3vh] text-fluid-sm">我們相信空間的核心，不在於區隔，而在於連結。<br>在理性與詩性之間，尋找思想的留白。</p>
                    <button onclick="openContactModal()" class="inline-block bg-yr-red text-white px-[3vw] py-[2vh] text-fluid-xs font-bold tracking-[0.2em] hover:bg-yr-black transition-colors duration-300 mt-8">開始對話</button>
                </div>
            </section>
        </div>
        
        <div id="content-en" class="lang-section">
             <section id="hero-en" class="relative h-[100dvh] flex flex-col justify-center items-center text-center px-6"><div class="animate-on-scroll"><p class="text-fluid-base text-yr-red tracking-[0.3em] uppercase font-medium mb-8 hero-float" data-text-key="hero-subtitle-en">FROM VISION TO FORM.</p><div class="w-12 h-[1px] bg-yr-black mx-auto opacity-20 mb-8"></div></div><div class="absolute bottom-[10vh] w-full px-[10vw] text-center animate-on-scroll" style="transition-delay: 0.3s;"><p class="text-fluid-sm text-gray-600 leading-loose font-light tracking-wide text-center" data-text-key="hero-desc-en">YR ATELIER (Y.R.A.) ...</p></div></section>
             <section id="philosophy-en" class="py-[10vh] px-[4vw] bg-white border-t border-gray-100 scroll-mt-20">
                 <div class="w-full flex flex-col md:flex-row gap-[4vw]">
                    <div class="w-full md:w-1/3 animate-on-scroll text-left"><h2 class="text-fluid-base font-bold text-yr-red tracking-[0.2em] mb-4">BRAND PRINCIPLE</h2><h3 class="text-fluid-xl font-light text-yr-black tracking-widest leading-snug"><span data-text-key="philo-title-en">{/}<br></span><span class="text-fluid-xs text-gray-400" data-text-key="philo-subtitle-en">Clarity and Calm.</span></h3></div>
                    <div class="w-full md:w-2/3 grid grid-cols-1 md:grid-cols-2 gap-[4vw] animate-on-scroll" style="transition-delay: 0.2s;">
                        <div class="text-fluid-sm text-gray-600 leading-relaxed font-light tracking-wide text-justify"><p class="mb-6" data-text-key="philo-text-1-en">...</p></div>
                        <div class="text-fluid-sm text-gray-600 leading-relaxed font-light tracking-wide text-justify border-l md:border-l border-gray-100 pl-[2vw]"><p class="mb-6" data-text-key="philo-text-2-en">...</p></div>
                    </div>
                </div>
            </section>
             <section id="structure-en" class="py-[10vh] px-[4vw] bg-yr-white scroll-mt-20"><div class="w-full animate-on-scroll text-center mb-[5vh]"><h2 class="text-fluid-xl font-light tracking-widest text-yr-black">Structure</h2></div><div class="flex flex-col md:flex-row justify-center items-stretch w-full gap-4 md:gap-0 min-h-[500px]"><div id="wing-arch-en" onclick="selectStructure('arch', 'en')" class="flex-1 bg-white p-[2vw] py-[4vh] text-center border border-gray-100 hover:border-yr-black transition-all duration-500 group cursor-pointer hover:shadow-lg relative overflow-hidden flex flex-col justify-center"><div class="default-content transition-opacity duration-500"><h3 class="text-fluid-lg tracking-widest mb-2 group-hover:text-yr-red transition-colors whitespace-nowrap">YE/RI ARCHITECTS</h3><p class="text-fluid-sm text-gray-400 tracking-widest mb-[3vh]">YE/RI ARCHITECTS</p><div class="w-8 h-[1px] bg-yr-black mx-auto mb-[3vh]"></div><p class="text-fluid-sm text-gray-600 font-light tracking-wide">Architecture / Landscape</p><p class="mt-[3vh] text-fluid-sm text-yr-black font-bold tracking-[0.2em] uppercase">Beyond Form</p></div><div class="detail-content hidden opacity-0 transition-opacity duration-500 absolute inset-0 bg-white p-8 flex-col justify-center items-center text-left overflow-y-auto"></div><div id="local-trans-room-en" class="local-transition hidden"><svg viewBox="46070 26370 2030 2000" xmlns="http://www.w3.org/2000/svg" class="w-[30%] h-[30%] text-yr-black"><g><polyline class="trans-svg-path" stroke="currentColor" fill="none" points="46073.72,26373.49 47111.93,27272.6 47111.93,28369.67 "/><polyline class="trans-svg-path" stroke="currentColor" fill="none" points="47111.95,26373.02 48090.9,26373.02 47436.49,27272.73 47785.92,27575.23 "/></g></svg></div></div><div class="hidden md:flex flex-col justify-center items-center px-[2vw]"><div class="w-[1px] h-full bg-gray-300"></div></div><div id="wing-room-en" onclick="selectStructure('room', 'en')" class="flex-1 bg-white p-[2vw] py-[4vh] text-center border border-gray-100 hover:border-yr-black transition-all duration-500 group cursor-pointer hover:shadow-lg relative overflow-hidden flex flex-col justify-center"><div class="default-content transition-opacity duration-500"><h3 class="text-fluid-lg tracking-widest mb-2 group-hover:text-yr-red transition-colors whitespace-nowrap">Y/ROOM DESIGN</h3><p class="text-fluid-sm text-gray-400 tracking-widest mb-[3vh]">Y/ROOM</p><div class="w-8 h-[1px] bg-yr-black mx-auto mb-[3vh]"></div><p class="text-fluid-sm text-gray-600 font-light tracking-wide">Interior / Living</p><p class="mt-[3vh] text-fluid-sm text-yr-black font-bold tracking-[0.2em] uppercase">Rhythm in Life</p></div><div class="detail-content hidden opacity-0 transition-opacity duration-500 absolute inset-0 bg-white p-8 flex-col justify-center items-center text-left overflow-y-auto"></div><div id="local-trans-arch-en" class="local-transition hidden"><svg viewBox="81800 47660 2020 1860" xmlns="http://www.w3.org/2000/svg" class="w-[30%] h-[30%] text-yr-black"><g><polygon class="trans-svg-path" stroke="currentColor" fill="none" points="83165.26,49195.46 83819.67,48295.75 83819.67,47666.28 83165.26,48565.99 "/><polygon class="trans-svg-path" stroke="currentColor" fill="none" points="83819.67,47666.28 82840.72,47666.28 82840.72,48295.75 83360.03,48295.75 "/><polygon class="trans-svg-path" stroke="currentColor" fill="none" points="82896.49,48614.18 81802.49,47666.75 81802.49,48565.31 82896.49,49512.74 "/><polygon class="trans-svg-path" stroke="currentColor" fill="none" points="83165.26,48565.99 83165.26,49195.46 83514.69,49497.96 83514.69,48868.49 "/></g></svg></div></div></div></section>
             <section id="projects-en" class="py-[10vh] bg-white scroll-mt-20"><div class="w-full px-[4vw]"><div class="flex justify-between items-end mb-[5vh] animate-on-scroll"><div><h2 class="text-fluid-xl font-light tracking-widest text-yr-black">Selected Projects</h2></div><button onclick="openAllProjects()" class="text-fluid-xs font-bold text-yr-red tracking-widest border-b border-yr-red pb-1 whitespace-nowrap hover:text-yr-black hover:border-yr-black transition-colors">VIEW ALL</button></div><div id="featured-projects-en" class="grid grid-cols-1 md:grid-cols-2 gap-12 md:gap-[4vw]"></div></div></section>
             <section id="contact-en" class="py-[15vh] px-[4vw] text-center bg-yr-white border-t border-gray-200 scroll-mt-20"><div class="w-full animate-on-scroll"><h2 class="text-fluid-2xl font-light tracking-widest text-yr-black mb-[3vh]">From Vision to Form</h2><button onclick="openContactModal()" class="inline-block bg-yr-red text-white px-[3vw] py-[2vh] text-fluid-xs font-bold tracking-[0.2em] hover:bg-yr-black transition-colors duration-300 mt-8">CONTACT US</button></div></section>
        </div>
    </main>

    <!-- Admin & Script 2 -->
    <div id="login-modal" class="admin-modal"><div class="bg-white p-8 w-[90%] max-w-[400px] text-center shadow-2xl relative"><div onclick="closeAdminLogin()" class="absolute top-4 right-4 cursor-pointer">✕</div><h3 class="text-xl font-light tracking-widest mb-6">BACKEND LOGIN</h3><input type="text" id="admin-id" placeholder="ID" class="w-full border-b border-gray-300 p-2 mb-4 outline-none focus:border-yr-red tracking-widest"><input type="password" id="admin-pw" placeholder="PASSWORD" class="w-full border-b border-gray-300 p-2 mb-8 outline-none focus:border-yr-red tracking-widest"><button onclick="attemptLogin()" class="bg-yr-black text-white px-6 py-2 tracking-widest hover:bg-yr-red transition-colors w-full">ENTER</button></div></div>
    <div id="admin-dashboard" class="overlay-fixed bg-yr-white z-[90]"><div onclick="closeAdminDashboard()" class="close-btn"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></div><div class="w-full h-full flex flex-col"><div class="h-[10vh] flex items-center justify-center border-b border-gray-200 bg-white"><h2 class="text-fluid-lg tracking-widest">ADMIN DASHBOARD</h2></div><div class="flex flex-1 overflow-hidden"><div class="w-1/4 bg-white border-r border-gray-200 flex flex-col p-6 gap-4"><button onclick="switchAdminTab('projects')" id="tab-projects" class="dashboard-tab text-left py-2 text-gray-500 hover:text-yr-red tracking-widest active">PROJECTS</button><button onclick="switchAdminTab('texts')" id="tab-texts" class="dashboard-tab text-left py-2 text-gray-500 hover:text-yr-red tracking-widest">SITE TEXTS</button><button onclick="switchAdminTab('leaders')" id="tab-leaders" class="dashboard-tab text-left py-2 text-gray-500 hover:text-yr-red tracking-widest">LEADERS</button><button onclick="switchAdminTab('messages')" id="tab-messages" class="dashboard-tab text-left py-2 text-gray-500 hover:text-yr-red tracking-widest">MESSAGES</button></div><div class="w-3/4 p-8 overflow-y-auto bg-gray-50"><div id="panel-projects"><button onclick="addNewProject()" class="mb-8 bg-yr-red text-white px-4 py-2 text-sm tracking-widest hover:bg-black transition-colors">+ NEW PROJECT</button><div id="admin-projects-list" class="grid grid-cols-1 md:grid-cols-2 gap-4"></div></div><div id="panel-texts" class="hidden"><div id="admin-texts-list" class="space-y-6"></div></div><div id="panel-leaders" class="hidden"><div id="admin-leaders-list" class="space-y-8"></div></div><div id="panel-messages" class="hidden"><div id="admin-messages-list" class="space-y-4"></div></div></div></div></div></div>
    <div id="edit-project-modal" class="admin-modal z-[100]"><div class="bg-white p-8 w-[90%] max-w-[600px] max-h-[90vh] overflow-y-auto shadow-2xl relative"><div onclick="closeEditModal()" class="absolute top-4 right-4 cursor-pointer text-xl">✕</div><h3 class="text-xl font-light tracking-widest mb-6 text-center" id="edit-modal-title">EDIT PROJECT</h3><div class="space-y-4"><input type="hidden" id="edit-p-id"><div><label class="text-xs text-gray-400">TITLE</label><input id="edit-p-title" class="w-full border p-2"></div><div><label class="text-xs text-gray-400">TYPE</label><input id="edit-p-type" class="w-full border p-2"></div><div><label class="text-xs text-gray-400">LOCATION</label><input id="edit-p-location" class="w-full border p-2"></div><div><label class="text-xs text-gray-400">YEAR</label><input id="edit-p-year" class="w-full border p-2"></div><div><label class="text-xs text-gray-400">DESIGN BY</label><input id="edit-p-design" class="w-full border p-2"></div><div><label class="text-xs text-gray-400">PHOTOGRAPHY</label><input id="edit-p-photo" class="w-full border p-2"></div><div><label class="text-xs text-gray-400">TAG (YE/RI or Y/ROOM)</label><input id="edit-p-tag" class="w-full border p-2"></div><div><label class="text-xs text-gray-400">MAIN IMAGE URL</label><input id="edit-p-image" class="w-full border p-2"></div><div><label class="text-xs text-gray-400">GALLERY URLS (Comma separated)</label><textarea id="edit-p-images" class="w-full border p-2 h-20"></textarea></div><div><label class="text-xs text-gray-400">DESCRIPTION (HTML Allowed)</label><textarea id="edit-p-desc" class="w-full border p-2 h-32"></textarea></div><div class="flex items-center gap-2"><input type="checkbox" id="edit-p-coming"><label class="text-sm">Coming Soon Mode</label></div><button onclick="submitProjectEdit()" class="w-full bg-yr-black text-white py-3 mt-4 tracking-widest hover:bg-yr-red">SAVE</button></div></div></div>

    <script>
        // --- Core ---
        let currentLang = 'cn';
        function enterSite(lang) { currentLang = lang; document.getElementById('portal').classList.add('portal-fade-out'); setTimeout(() => { document.getElementById('portal').style.display = 'none'; document.getElementById('header').classList.remove('opacity-0', 'pointer-events-none'); document.getElementById('main-content').classList.remove('hidden'); switchLanguage(lang); checkScroll(); if(window.projectsData) renderFrontendProjects(window.projectsData); }, 800); }
        function backToPortal() { document.getElementById('mobile-menu').classList.remove('open'); closeAllProjects(); closeProjectDetail(); closeAdminDashboard(); restoreDefaultStructure(); document.getElementById('header').classList.add('opacity-0', 'pointer-events-none'); const portal = document.getElementById('portal'); portal.style.display = 'flex'; void portal.offsetWidth; portal.classList.remove('portal-fade-out'); setTimeout(() => { document.getElementById('main-content').classList.add('hidden'); window.scrollTo(0, 0); }, 500); }
        function switchLanguage(lang) { document.querySelectorAll('.lang-section').forEach(el => el.classList.remove('active')); document.getElementById(`content-${lang}`).classList.add('active'); document.querySelectorAll('.lang-nav').forEach(el => { el.classList.add('hidden'); el.classList.remove('flex'); }); const targetNav = document.getElementById(`nav-${lang}`); if (targetNav) { targetNav.classList.remove('hidden'); targetNav.classList.add('flex'); } document.getElementById('mobile-nav-cn').classList.add('hidden'); document.getElementById('mobile-nav-en').classList.add('hidden'); document.getElementById(`mobile-nav-${lang}`).classList.remove('hidden'); renderTexts(); if(window.projectsData) renderFrontendProjects(window.projectsData); }
        function toggleMobileMenu() { const menu = document.getElementById('mobile-menu'); const btn = document.getElementById('hamburger-btn'); menu.classList.toggle('open'); btn.classList.toggle('hamburger-active'); document.body.style.overflow = menu.classList.contains('open') ? 'hidden' : ''; }
        function checkScroll() { const h = document.getElementById('header'); window.scrollY > 50 ? h.classList.add('bg-white/90', 'backdrop-blur-sm', 'shadow-sm') : h.classList.remove('bg-white/90', 'backdrop-blur-sm', 'shadow-sm'); document.querySelectorAll('.animate-on-scroll').forEach(el => { if (el.getBoundingClientRect().top < window.innerHeight * 0.9) el.classList.add('is-visible'); }); }
        window.addEventListener('scroll', checkScroll);

        // --- Rendering ---
        window.renderTexts = () => { const t = window.siteTexts || {}; document.querySelectorAll('[data-text-key]').forEach(el => { const k = el.getAttribute('data-text-key'); if(t[k]) el.innerHTML = t[k]; }); };
        window.renderFrontendProjects = (d) => { if(!d) return; const r = d.filter(p => !p.isComingSoon).slice(0, 2); const c1 = document.getElementById('featured-projects-cn'); const c2 = document.getElementById('featured-projects-en'); const h = (p) => `<div class="group cursor-pointer animate-on-scroll is-visible" onclick="openProjectDetail('${p.id}')"><div class="aspect-[4/3] bg-gray-100 overflow-hidden relative"><img src="${p.image}" class="w-full h-full object-cover transition-transform duration-700 grayscale-0 md:grayscale md:group-hover:grayscale-0"><div class="absolute top-4 left-4 bg-yr-black text-white text-[10px] px-2 py-1 tracking-widest">${p.tag}</div></div><div class="mt-[2vh]"><h3 class="text-fluid-base font-light tracking-widest group-hover:text-yr-red transition-colors">${p.title}</h3><p class="text-fluid-xs text-gray-400 mt-1 tracking-wider">${p.type} / ${p.location}</p></div></div>`; if(c1) c1.innerHTML = r.map(h).join(''); if(c2) c2.innerHTML = r.map(h).join(''); };

        // --- Structure Interaction Logic ---
        let currentStructureState = 'default'; 

        window.selectStructure = (type, lang) => {
            const suffix = lang === 'en' ? '-en' : '-cn';
            if ((currentStructureState === `arch${suffix}_active` && type === 'arch') || (currentStructureState === `room${suffix}_active` && type === 'room')) { restoreDefaultStructure(); return; }
            const archWing = document.getElementById('wing-arch' + suffix);
            const roomWing = document.getElementById('wing-room' + suffix);
            const leaders = window.leadersData || window.initialLeaders || {};
            document.querySelectorAll('.default-content').forEach(el => el.classList.remove('hidden', 'opacity-0'));
            document.querySelectorAll('.detail-content').forEach(el => { el.classList.add('hidden', 'opacity-0'); el.classList.remove('flex'); });
            document.querySelectorAll('.local-transition').forEach(el => { el.classList.add('hidden'); el.classList.remove('active', 'trans-anim-active'); });

            if (type === 'arch') {
                currentStructureState = `arch${suffix}_active`;
                const targetWing = roomWing;
                const targetTrans = document.getElementById(`local-trans-arch${suffix}`); 
                targetWing.querySelector('.default-content').classList.add('hidden');
                targetTrans.classList.remove('hidden'); targetTrans.classList.add('active'); setTimeout(() => targetTrans.classList.add('trans-anim-active'), 10);
                setTimeout(() => {
                    targetTrans.classList.remove('active', 'trans-anim-active'); targetTrans.classList.add('hidden');
                    const detailContainer = targetWing.querySelector('.detail-content');
                    const data = leaders[`arch${lang === 'en' ? '_en' : ''}`];
                    detailContainer.innerHTML = `<div class="w-full h-full flex flex-col items-center justify-center relative"><button onclick="event.stopPropagation(); restoreDefaultStructure()" class="absolute top-0 right-0 text-gray-400 hover:text-yr-red p-2">✕ CLOSE</button><div class="w-32 h-32 md:w-40 md:h-40 mb-6 overflow-hidden rounded-full border-2 border-gray-100"><img src="${data.photo}" class="w-full h-full object-cover"></div><h3 class="text-xl tracking-widest mb-1 font-medium">${data.name}</h3><p class="text-sm text-yr-red tracking-widest mb-6">${data.title}</p><div class="text-sm font-light text-gray-600 space-y-4 text-center"><div><p class="text-xs text-gray-400 mb-1">${lang === 'en' ? 'EDUCATION' : '學歷'}</p>${data.edu}</div><div><p class="text-xs text-gray-400 mb-1">${lang === 'en' ? 'EXPERIENCE' : '經歷'}</p><div class="whitespace-pre-line leading-relaxed">${data.exp}</div></div></div></div>`;
                    detailContainer.classList.remove('hidden'); detailContainer.classList.add('flex'); setTimeout(() => detailContainer.classList.remove('opacity-0'), 50);
                }, 1800);
            } 
            else if (type === 'room') {
                currentStructureState = `room${suffix}_active`;
                const targetWing = archWing;
                const targetTrans = document.getElementById(`local-trans-room${suffix}`);
                targetWing.querySelector('.default-content').classList.add('hidden');
                targetTrans.classList.remove('hidden'); targetTrans.classList.add('active'); setTimeout(() => targetTrans.classList.add('trans-anim-active'), 10);
                setTimeout(() => {
                    targetTrans.classList.remove('active', 'trans-anim-active'); targetTrans.classList.add('hidden');
                    const detailContainer = targetWing.querySelector('.detail-content');
                    const data = leaders[`room${lang === 'en' ? '_en' : ''}`];
                    detailContainer.innerHTML = `<div class="w-full h-full flex flex-col items-center justify-center relative"><button onclick="event.stopPropagation(); restoreDefaultStructure()" class="absolute top-0 right-0 text-gray-400 hover:text-yr-red p-2">✕ CLOSE</button><div class="w-32 h-32 md:w-40 md:h-40 mb-6 overflow-hidden rounded-full border-2 border-gray-100"><img src="${data.photo}" class="w-full h-full object-cover"></div><h3 class="text-xl tracking-widest mb-1 font-medium">${data.name}</h3><p class="text-sm text-yr-red tracking-widest mb-6">${data.title}</p><div class="text-sm font-light text-gray-600 space-y-4 text-center"><div><p class="text-xs text-gray-400 mb-1">${lang === 'en' ? 'EDUCATION' : '學歷'}</p>${data.edu}</div><div><p class="text-xs text-gray-400 mb-1">${lang === 'en' ? 'EXPERIENCE' : '經歷'}</p><div class="whitespace-pre-line leading-relaxed">${data.exp}</div></div></div></div>`;
                    detailContainer.classList.remove('hidden'); detailContainer.classList.add('flex'); setTimeout(() => detailContainer.classList.remove('opacity-0'), 50);
                }, 1800);
            }
        };

        window.restoreDefaultStructure = () => {
            currentStructureState = 'default';
            document.querySelectorAll('.local-transition').forEach(el => { el.classList.add('hidden'); el.classList.remove('active', 'trans-anim-active'); });
            document.querySelectorAll('.detail-content').forEach(el => el.classList.add('opacity-0'));
            setTimeout(() => {
                document.querySelectorAll('.detail-content').forEach(el => { el.classList.add('hidden'); el.classList.remove('flex'); });
                document.querySelectorAll('.default-content').forEach(el => el.classList.remove('hidden'));
                setTimeout(() => document.querySelectorAll('.default-content').forEach(el => el.classList.remove('opacity-0')), 50);
            }, 300);
        };

        // --- Overlays ---
        window.openAllProjects = () => { const d = window.projectsData || []; document.getElementById('projects-grid-container').innerHTML = d.map(p => p.isComingSoon ? `<div class="aspect-[4/3] bg-gray-200 flex items-center justify-center flex-col text-yr-grey"><span class="text-fluid-lg tracking-widest font-light">COMING SOON</span><div class="w-8 h-[1px] bg-gray-400 my-2"></div><span class="text-fluid-xs tracking-widest">Y/R/A</span></div>` : `<div class="project-card group cursor-pointer" onclick="openProjectDetail('${p.id}')"><div class="aspect-[4/3] bg-gray-100 overflow-hidden relative"><img src="${p.image}" class="project-img w-full h-full object-cover transition-transform duration-700 grayscale-0 md:grayscale md:group-hover:grayscale-0"><div class="absolute top-4 left-4 bg-yr-black text-white text-[10px] px-2 py-1 tracking-widest">${p.tag}</div></div><div class="mt-[2vh]"><h3 class="text-fluid-base font-light tracking-widest group-hover:text-yr-red transition-colors">${p.title}</h3><p class="text-fluid-xs text-gray-400 mt-1 tracking-wider">${p.type} / ${p.location}</p></div></div>`).join(''); document.getElementById('all-projects-overlay').classList.add('open'); document.body.style.overflow = 'hidden'; };
        window.closeAllProjects = () => { document.getElementById('all-projects-overlay').classList.remove('open'); document.body.style.overflow = ''; };
        
        let currentProjectImages = [];
        window.openProjectDetail = (id) => {
            const p = window.projectsData.find(x => x.id == id); if (!p) return;
            const transOverlay = document.getElementById('transition-overlay');
            document.getElementById('trans-logo-arch').classList.add('hidden'); document.getElementById('trans-logo-room').classList.add('hidden'); transOverlay.classList.remove('trans-anim-active');
            if (p.tag.includes('YE/RI')) document.getElementById('trans-logo-arch').classList.remove('hidden'); else document.getElementById('trans-logo-room').classList.remove('hidden');
            transOverlay.classList.add('active'); setTimeout(() => transOverlay.classList.add('trans-anim-active'), 50);
            currentProjectImages = p.images && p.images.length > 0 ? p.images : [p.image];
            setTimeout(() => {
                document.getElementById('project-detail-content').innerHTML = `<div class="w-full h-[60vh] md:h-[80vh] bg-gray-100 overflow-hidden relative mb-[5vh] group"><img id="detail-main-image" src="${currentProjectImages[0]}" class="w-full h-full object-cover transition-all duration-500"><div class="absolute bottom-0 left-0 w-full bg-gradient-to-t from-black/50 to-transparent h-[30%] pointer-events-none"></div><div class="absolute bottom-[5vh] left-[4vw] text-white pointer-events-none"><h1 class="text-fluid-2xl font-light tracking-widest mb-2">${p.title}</h1><p class="text-fluid-sm tracking-widest opacity-90">${p.tag} / ${p.year}</p></div><div class="absolute bottom-[2vh] right-[4vw] left-[4vw] flex flex-col items-end z-10"><div class="text-white text-xs tracking-widest mb-2 bg-black/30 px-2 py-1 backdrop-blur-sm"><span id="image-counter">1</span> / ${currentProjectImages.length}</div><div class="flex gap-2 overflow-x-auto hide-scrollbar max-w-full pb-2">${currentProjectImages.map((img, i) => `<div onclick="changeMainImage('${img}', ${i})" class="thumbnail-item w-16 h-12 md:w-24 md:h-16 flex-shrink-0 cursor-pointer border border-transparent hover:border-white/50 transition-all ${i === 0 ? 'border-yr-red opacity-100' : 'opacity-60 hover:opacity-100'}"><img src="${img}" class="w-full h-full object-cover"></div>`).join('')}</div></div></div><div class="w-full px-[4vw] flex flex-col md:flex-row gap-[5vh] md:gap-[5vw]"><div class="w-full md:w-1/3 border-t border-gray-200 pt-4 md:sticky md:top-[100px] self-start"><ul class="space-y-4 text-fluid-sm font-light tracking-wide text-gray-600"><li><span class="block text-xs text-gray-400 uppercase tracking-widest mb-1">Project</span>${p.title}</li><li><span class="block text-xs text-gray-400 uppercase tracking-widest mb-1">Type</span>${p.type}</li><li><span class="block text-xs text-gray-400 uppercase tracking-widest mb-1">Location</span>${p.location}</li><li><span class="block text-xs text-gray-400 uppercase tracking-widest mb-1">Year</span>${p.year}</li><li><span class="block text-xs text-gray-400 uppercase tracking-widest mb-1">Design By</span>${p.designBy}</li><li><span class="block text-xs text-gray-400 uppercase tracking-widest mb-1">Photography</span>${p.photography}</li></ul></div><div class="w-full md:w-2/3"><div class="prose prose-lg max-w-none text-yr-black font-light tracking-wide leading-loose">${p.description}</div></div></div>`;
                document.getElementById('project-detail-overlay').classList.add('open'); transOverlay.classList.remove('active'); setTimeout(() => transOverlay.classList.remove('trans-anim-active'), 500);
            }, 2000);
        };
        window.closeProjectDetail = () => document.getElementById('project-detail-overlay').classList.remove('open');
        window.changeMainImage = (src, index) => { const main = document.getElementById('detail-main-image'); main.classList.add('opacity-0'); setTimeout(() => { main.src = src; main.classList.remove('opacity-0'); }, 200); document.getElementById('image-counter').innerText = index + 1; document.querySelectorAll('.thumbnail-item').forEach((t, i) => t.className = `thumbnail-item w-16 h-12 md:w-24 md:h-16 flex-shrink-0 cursor-pointer border border-transparent hover:border-white/50 transition-all ${i === index ? 'border-yr-red opacity-100' : 'opacity-60 hover:opacity-100'}`); };

        // Contact Modal Logic
        window.openContactModal = () => { document.getElementById('contact-modal').classList.add('active'); };
        window.closeContactModal = () => { document.getElementById('contact-modal').classList.remove('active'); };
        window.submitContactForm = async () => { const name = document.getElementById('contact-name').value; const phone = document.getElementById('contact-phone').value; const email = document.getElementById('contact-email').value; const message = document.getElementById('contact-message').value; if (!name || !email || !message) { alert('請填寫必要欄位 (姓名, Email, 留言)'); return; } const success = await window.submitContact({ name, phone, email, message }); if (success) { alert('訊息已發送！(Message Sent)'); closeContactModal(); document.getElementById('contact-name').value = ''; document.getElementById('contact-phone').value = ''; document.getElementById('contact-email').value = ''; document.getElementById('contact-message').value = ''; } else { alert('發送失敗，請稍後再試。(Failed to send)'); } };

        // --- Admin ---
        window.openAdminLogin = () => document.getElementById('login-modal').classList.add('active');
        window.closeAdminLogin = () => document.getElementById('login-modal').classList.remove('active');
        window.attemptLogin = () => { if(document.getElementById('admin-id').value === 'bala0105' && document.getElementById('admin-pw').value === 'bala0105') { closeAdminLogin(); openAdminDashboard(); } else alert("Failed"); };
        window.openAdminDashboard = () => { document.getElementById('admin-dashboard').classList.add('open'); refreshAdminProjects(); refreshAdminTexts(); refreshAdminLeaders(); refreshAdminMessages(); };
        window.closeAdminDashboard = () => document.getElementById('admin-dashboard').classList.remove('open');
        window.switchAdminTab = (t) => { document.querySelectorAll('.dashboard-tab').forEach(e => e.classList.remove('active')); document.getElementById(`tab-${t}`).classList.add('active'); ['projects','texts','leaders', 'messages'].forEach(p => document.getElementById(`panel-${p}`).classList.add('hidden')); document.getElementById(`panel-${t}`).classList.remove('hidden'); };
        window.refreshAdminProjects = () => { const l = document.getElementById('admin-projects-list'); const d = window.projectsData || []; l.innerHTML = d.map(p => `<div class="bg-white p-4 border border-gray-200 flex gap-4 shadow-sm"><div class="w-20 h-20 bg-gray-100 flex-shrink-0"><img src="${p.image}" class="w-full h-full object-cover"></div><div class="flex-1"><div class="font-bold text-sm">${p.title}</div><div class="text-xs text-gray-500">${p.tag}</div><div class="mt-2 flex gap-2"><button onclick="editProject('${p.id}')" class="text-xs bg-gray-200 px-2 py-1 hover:bg-gray-300">EDIT</button><button onclick="deleteProject('${p.id}')" class="text-xs bg-red-100 text-red-500 px-2 py-1 hover:bg-red-200">DELETE</button></div></div></div>`).join(''); };
        window.refreshAdminTexts = () => { const l = document.getElementById('admin-texts-list'); const t = window.siteTexts || {}; const k = ["hero-title-cn", "hero-subtitle-cn", "hero-desc-cn", "philo-title-cn", "philo-subtitle-cn", "philo-text-1-cn", "philo-text-2-cn", "hero-subtitle-en", "hero-desc-en", "philo-title-en", "philo-subtitle-en", "philo-text-1-en", "philo-text-2-en"]; l.innerHTML = k.map(key => `<div class="bg-white p-4 border border-gray-200 shadow-sm"><div class="text-xs text-gray-400 font-bold mb-2 uppercase">${key}</div><textarea id="txt-input-${key}" class="w-full border border-gray-300 p-2 text-sm h-24">${t[key] || ''}</textarea><button onclick="saveSiteText('${key}', document.getElementById('txt-input-${key}').value)" class="mt-2 bg-yr-black text-white text-xs px-4 py-2 tracking-widest hover:bg-yr-red">UPDATE</button></div>`).join(''); };
        window.refreshAdminLeaders = () => {
            const l = document.getElementById('admin-leaders-list');
            const d = window.leadersData || window.initialLeaders || {};
            const keys = ['arch', 'room', 'arch_en', 'room_en'];
            l.innerHTML = keys.map(key => {
                const data = d[key] || {};
                return `
                    <div class="bg-white p-6 border border-gray-200 shadow-sm">
                        <div class="text-lg font-bold mb-4 uppercase tracking-widest">${key === 'arch' ? '逸離建築 (Architecture)' : key === 'room' ? '韻室設計 (Interior)' : key === 'arch_en' ? 'YE/RI (EN)' : 'Y/ROOM (EN)'}</div>
                        <div class="space-y-3">
                            <div><label class="text-xs text-gray-400">Name</label><input id="leader-${key}-name" value="${data.name || ''}" class="w-full border p-2"></div>
                            <div><label class="text-xs text-gray-400">Title</label><input id="leader-${key}-title" value="${data.title || ''}" class="w-full border p-2"></div>
                            <div><label class="text-xs text-gray-400">Education</label><input id="leader-${key}-edu" value="${data.edu || ''}" class="w-full border p-2"></div>
                            <div><label class="text-xs text-gray-400">Photo URL</label><input id="leader-${key}-photo" value="${data.photo || ''}" class="w-full border p-2"></div>
                            <div><label class="text-xs text-gray-400">Experience</label><textarea id="leader-${key}-exp" class="w-full border p-2 h-32">${data.exp || ''}</textarea></div>
                            <button onclick="submitLeaderEdit('${key}')" class="bg-yr-black text-white px-4 py-2 text-xs tracking-widest hover:bg-yr-red">SAVE</button>
                        </div>
                    </div>
                `;
            }).join('');
        };
        window.refreshAdminMessages = () => {
            const list = document.getElementById('admin-messages-list');
            const data = window.messagesData || [];
            if (data.length === 0) {
                list.innerHTML = '<div class="text-gray-400 text-center">No messages yet.</div>';
                return;
            }
            list.innerHTML = data.map(msg => `
                <div class="bg-white p-4 border border-gray-200 shadow-sm">
                    <div class="flex justify-between items-start mb-2">
                        <div>
                            <span class="font-bold text-sm">${msg.name}</span>
                            <span class="text-xs text-gray-400 ml-2">${new Date(msg.timestamp).toLocaleString()}</span>
                        </div>
                        <a href="mailto:${msg.email}" class="text-yr-red text-xs hover:underline">REPLY</a>
                    </div>
                    <div class="text-xs text-gray-500 mb-2">
                        <div>Email: ${msg.email}</div>
                        <div>Phone: ${msg.phone || 'N/A'}</div>
                    </div>
                    <div class="text-sm bg-gray-50 p-2 text-gray-700 whitespace-pre-line">${msg.message}</div>
                </div>
            `).join('');
        };

        window.submitLeaderEdit = (key) => {
            const data = {
                name: document.getElementById(`leader-${key}-name`).value,
                title: document.getElementById(`leader-${key}-title`).value,
                edu: document.getElementById(`leader-${key}-edu`).value,
                photo: document.getElementById(`leader-${key}-photo`).value,
                exp: document.getElementById(`leader-${key}-exp`).value
            };
            window.saveLeader(key, data);
        };

        window.addNewProject = () => { document.getElementById('edit-modal-title').innerText = "NEW PROJECT"; document.getElementById('edit-p-id').value = Date.now().toString(); ['title','type','location','year','design','photo','tag','image','images','desc'].forEach(id => document.getElementById(`edit-p-${id}`).value = ''); document.getElementById('edit-p-coming').checked = false; document.getElementById('edit-project-modal').classList.add('active'); };
        window.editProject = (id) => { const p = window.projectsData.find(x => x.id == id); if(!p) return; document.getElementById('edit-modal-title').innerText = "EDIT PROJECT"; document.getElementById('edit-p-id').value = p.id; document.getElementById('edit-p-title').value = p.title; document.getElementById('edit-p-type').value = p.type; document.getElementById('edit-p-location').value = p.location || ''; document.getElementById('edit-p-year').value = p.year || ''; document.getElementById('edit-p-design').value = p.designBy || ''; document.getElementById('edit-p-photo').value = p.photography || ''; document.getElementById('edit-p-tag').value = p.tag || ''; document.getElementById('edit-p-image').value = p.image || ''; document.getElementById('edit-p-images').value = (p.images || []).join(','); document.getElementById('edit-p-desc').value = p.description || ''; document.getElementById('edit-p-coming').checked = !!p.isComingSoon; document.getElementById('edit-project-modal').classList.add('active'); };
        window.submitProjectEdit = () => { const id = document.getElementById('edit-p-id').value; const p = { id: id, title: document.getElementById('edit-p-title').value, type: document.getElementById('edit-p-type').value, location: document.getElementById('edit-p-location').value, year: document.getElementById('edit-p-year').value, designBy: document.getElementById('edit-p-design').value, photography: document.getElementById('edit-p-photo').value, tag: document.getElementById('edit-p-tag').value, image: document.getElementById('edit-p-image').value, images: document.getElementById('edit-p-images').value.split(',').filter(x => x.trim() !== ''), description: document.getElementById('edit-p-desc').value, isComingSoon: document.getElementById('edit-p-coming').checked }; window.saveProject(p); closeEditModal(); };
        window.closeEditModal = () => document.getElementById('edit-project-modal').classList.remove('active');
        
        // Initial Render Trigger: Wait for DOM Content Loaded
        document.addEventListener("DOMContentLoaded", function() {
            if (window.initialProjects) {
                window.renderFrontendProjects(window.initialProjects);
                window.renderTexts(); // Render texts if initialTexts are available
            }
        });
    </script>
</body>
</html>